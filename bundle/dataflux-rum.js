!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n),t.d(n,"datafluxRum",(function(){return Ot}));var r,i=Array.prototype,o=Function.prototype,s=Object.prototype,a=i.slice,u=s.toString,c=s.hasOwnProperty,d=(o.bind,i.forEach),f=(i.indexOf,Array.isArray),p=function(e,n,t){if(null===e)return!1;if(d&&e.forEach===d)e.forEach(n,t);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(r in e&&!1===n.call(t,e[r],r,e))return!1}else for(var o in e)if(c.call(e,o)&&!1===n.call(t,e[o],o,e))return!1},l=function(e){return p(a.call(arguments,1),(function(n){for(var t in n)void 0!==n[t]&&(e[t]=n[t])})),e},v=function(e){return p(a.call(arguments,1),(function(n){for(var t in n)void 0!==n[t]&&(y(n[t])&&y(e[t])?l(e[t],n[t]):e[t]=n[t])})),e},h=f||function(e){return"[object Array]"===u.call(e)},m=function(e){return e?e.toArray?e.toArray():h(e)?a.call(e):(n=e)&&c.call(n,"callee")?a.call(e):g(e):[];var n},g=function(e){var n=[];return null===e||p(e,(function(e){n[n.length]=e})),n},_=function(e,n,t){if(e.filter)return e.filter(n);for(var r=[],i=0;i<e.length;i++)if(c.call(e,i)){var o=e[i];n.call(t,o,i,e)&&r.push(o)}return r},E=function(e,n,t){if(e.map)return e.map(n);for(var r=[],i=0;i<e.length;i++)if(c.call(e,i)){var o=e[i];r.push(n.call(t,o,i,e))}return r},y=function(e){return null!==e&&"[object Object]"===u.call(e)},b=function(e){var n=[];return p(e,(function(e,t){n.push([t,e])})),n},w=function(e){return"[object String]"===u.call(e)},T=function(e){return"[object Number]"===u.call(e)&&/[\d\.]+/.test(String(e))},O=(Date.now,function(e,n,t){var r,i,o,s,a=0;t||(t={});var u=function(){a=!1===t.leading?0:(new Date).getTime(),r=null,s=e.apply(i,o),r||(i=o=null)},c=function(){o=arguments;var c=(new Date).getTime();a||!1!==t.leading||(a=c);var d=n-(c-a);return i=this,d<=0||d>n?(r&&(clearTimeout(r),r=null),a=c,s=e.apply(i,o),r||(i=o=null)):r||!1===t.trailing||(r=setTimeout(u,d)),s};return c.cancel=function(){clearTimeout(r),a=0,r=null},c}),S=(r=function(){for(var e=1*new Date,n=0;e==1*new Date;)n++;return e.toString(16)+n.toString(16)},function(){var e=String(screen.height*screen.width);e=e&&/\d{5,}/.test(e)?e.toString(16):String(31242*Math.random()).replace(".","").slice(0,8);var n=r()+"-"+Math.random().toString(16).replace(".","")+"-"+function(e){var n,t,r=navigator.userAgent,i=[],o=0;function s(e,n){var t,r=0;for(t=0;t<n.length;t++)r|=i[t]<<8*t;return e^r}for(n=0;n<r.length;n++)t=r.charCodeAt(n),i.unshift(255&t),i.length>=4&&(o=s(o,i),i=[]);return i.length>0&&(o=s(o,i)),o.toString(16)}()+"-"+e+"-"+r();return n||(String(Math.random())+String(Math.random())+String(Math.random())).slice(2,15)}),x=function(e){var n=function(e){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Path:8,URL:0,QueryString:9,Fragment:10},this._values={},this._regex=null,this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,void 0!==e&&this._parse(e)};return n.prototype.setUrl=function(e){this._parse(e)},n.prototype._initValues=function(){for(var e in this._fields)this._values[e]=""},n.prototype.addQueryString=function(e){if("object"!=typeof e)return!1;var n=this._values.QueryString||"";for(var t in e)n=new RegExp(t+"[^&]+").test(n)?n.replace(new RegExp(t+"[^&]+"),t+"="+e[t]):"&"===n.slice(-1)?n+t+"="+e[t]:""===n?t+"="+e[t]:n+"&"+t+"="+e[t];this._values.QueryString=n},n.prototype.getParse=function(){return this._values},n.prototype.getUrl=function(){var e="";return e+=this._values.Origin,e+=this._values.Port?":"+this._values.Port:"",e+=this._values.Path,e+=this._values.QueryString?"?"+this._values.QueryString:""},n.prototype._parse=function(e){this._initValues();var n=this._regex.exec(e);if(!n)throw"DPURLParser::_parse -> Invalid URL";for(var t in this._fields)void 0!==n[this._fields[t]]&&(this._values[t]=n[this._fields[t]]);this._values.Hostname=this._values.Host.replace(/:\d+$/,""),this._values.Origin=this._values.Protocol+"://"+this._values.Hostname},new n(e)};function C(e){return"object"==typeof e&&null!==e&&e.hasOwnProperty("toJSON")}function R(){}var k;function I(e){return 0!==e&&100*Math.random()<=e}function M(e){return"number"!=typeof e?e:+(1e6*e).toFixed(0)}function L(e){return Math.floor($()+e)}function $(){return void 0===k&&(k=performance.timing.navigationStart),k}function N(e,n){for(var t=n.split(".");t.length;){var r=t.shift();if(!(r in e)||!c.call(e,r))return;e=e[r]}return e}function A(e,n,t,r){return U(e,[n],t,r)}function U(e,n,t,r){var i=r&&r.once?function(e){o(),t(e)}:t;r=r&&r.passive?{capture:r.capture,passive:r.passive}:r&&r.capture,p(n,(function(n){e.addEventListener(n,i,r)}));var o=function(){p(n,(function(n){e.removeEventListener(n,i,r)}))};return{stop:o}}function B(e,n){return-1!==e.indexOf(n)}function D(e){return T(e)&&e>=0&&e<=100}function P(e){if(e.origin)return e.origin;var n=e.host.replace(/(:80|:443)$/,"");return e.protocol+"//"+n}function V(e){var n={};return p(e,(function(e,t){var r;n[(r=t,r.replace(/[A-Z]/g,(function(e,n){return(0!==n?"_":"")+e.toLowerCase()})).replace(/-/g,"_"))]=function e(n){if(h(n))return E(n,(function(n){return e(n)}));if("object"==typeof n&&null!==n)return V(n);return n}(e)})),n}function W(e){if(!w(e))return e;return String(e).replace(/[\s=,"]/g,(function(e){return"\\"+e}))}var F;function Q(e,n){var t,r,i=!1,o=function(){i=!0,window.clearTimeout(t),t=window.setTimeout((function(){i=!1}),1e3)};return{get:function(){return i||(r=j(e),o()),r},set:function(t,i){z(e,t,i,n),r=t,o()}}}function z(e,n,t,r){var i=new Date;i.setTime(i.getTime()+t);var o="expires="+i.toUTCString(),s=r&&r.crossSite?"none":"strict",a=r&&r.domain?";domain="+r.domain:"",u=r&&r.secure?";secure":"";document.cookie=e+"="+n+";"+o+";path=/;samesite="+s+a+u}function j(e){return function(e,n){var t=e.match("(?:^|;)\\s*"+n+"\\s*=\\s*([^;]+)");return t?t[1]:void 0}(document.cookie,e)}function q(e){return!!function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var n="dd_cookie_test_"+S();return z(n,"test",1e3,e),"test"===j(n)}catch(e){return console.error(e),!1}}(e)||(console.warn("Cookies are not authorized, we will not send any data."),!1)}function H(){return"file:"!==window.location.protocol||(console.error("Execution is not allowed in the current context."),!1)}var K=function(){this.observers=[]};K.prototype={subscribe:function(e){this.observers.push(e)},notify:function(e){p(this.observers,(function(n){n(e)}))}};var X=K,Y="beforeunload",G="click",J="keydown",Z="load",ee="popstate",ne="scroll",te="touchstart",re="visibilitychange",ie="DOMContentLoaded",oe="pointerdown",se="hashchange",ae="pagehide",ue="document",ce="xhr",de="beacon",fe="fetch",pe="css",le="js",ve="image",he="font",me="media",ge="other",_e={ACTION:"action",ERROR:"error",LONG_TASK:"long_task",VIEW:"view",RESOURCE:"resource"},Ee={FETCH:fe,XHR:ce};function ye(e,n,t){var r=function(e){var n=Q("_dataflulx_an_id",e);return n.get()||n.set(S(),5184e6),n}(e),i=Q("_dataflux_s",e),o=new X,s=we(i).id,a=O((function(){var e=we(i),r=t(e[n]);e[n]=r.trackingType,r.isTracked&&!e.id&&(e.id=S(),e.created=String(Date.now())),Te(e,i),r.isTracked&&s!==e.id&&(s=e.id,o.notify())}),1e3);return a(),function(e){var n=U(window,[G,te,J,ne],e,{capture:!0,passive:!0});Se.push(n.stop)}(a),function(e){var n=function(){"visible"===document.visibilityState&&e()},t=A(document,re,n);Se.push(t.stop);var r=window.setInterval(n,6e4);Se.push((function(){clearInterval(r)}))}((function(){Te(we(i),i)})),{getAnonymousID:function(){return r.get()},getId:function(){return we(i).id},getTrackingType:function(){return we(i)[n]},renewObservable:o}}var be=/^([a-z]+)=([a-z0-9-]+)$/;function we(e){var n=function(e){var n=e.get(),t={};(function(e){return void 0!==e&&(-1!==e.indexOf("&")||be.test(e))})(n)&&p(n.split("&"),(function(e){var n=be.exec(e);if(null!==n){var r=n[1],i=n[2];t[r]=i}}));return t}(e);return function(e){return(void 0===e.created||Date.now()-Number(e.created)<144e5)&&(void 0===e.expire||Date.now()<Number(e.expire))}(n)?n:(Oe(e),{})}function Te(e,n){if(function(e){if(y(e)){for(var n in e)if(c.call(e,n))return!1;return!0}return!1}(e))Oe(n);else{e.expire=String(Date.now()+9e5);var t=[];b(e);p(b(e),(function(e){t.push(e[0]+"="+e[1])}));var r=t.join("&");n.set(r,9e5)}}function Oe(e){e.set("",0)}var Se=[];var xe={PERFORMANCE_ENTRY_COLLECTED:"PERFORMANCE_ENTRY_COLLECTED",VIEW_CREATED:"VIEW_CREATED",VIEW_UPDATED:"VIEW_UPDATED",SESSION_RENEWED:"SESSION_RENEWED",DOM_MUTATED:"DOM_MUTATED",BEFORE_UNLOAD:"BEFORE_UNLOAD",REQUEST_STARTED:"REQUEST_STARTED",REQUEST_COMPLETED:"REQUEST_COMPLETED",RAW_RUM_EVENT_V2_COLLECTED:"RAW_RUM_EVENT_V2_COLLECTED",RUM_EVENT_V2_COLLECTED:"RUM_EVENT_V2_COLLECTED"};function Ce(){}Ce.prototype={callbacks:[],notify:function(e,n){var t=this.callbacks[e];t&&p(t,(function(e){e(n)}))},subscribe:function(e,n){this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n);var t=this;return{unsubscribe:function(){t.callbacks[e]=_(t.callbacks[e],(function(e){return e!==n}))}}}};var Re,ke="0",Ie="1",Me="2";function Le(e,n){var t=ye(e.cookieOptions,"rum",(function(n){return function(e,n){var t;t=function(e){return e===ke||e===Ie||e===Me}(n)?n:I(e.sampleRate)?I(e.resourceSampleRate)?Ie:Me:ke;return{trackingType:t,isTracked:$e(t)}}(e,n)}));return t.renewObservable.subscribe((function(){n.notify(xe.SESSION_RENEWED)})),{getId:t.getId,getAnonymousID:t.getAnonymousID,isTracked:function(){return void 0!==t.getId()&&$e(t.getTrackingType())},isTrackedWithResource:function(){return void 0!==t.getId()&&t.getTrackingType()===Ie}}}function $e(e){return e===Ie||e===Me}function Ne(e){return Ue(e,P(window.location)).href}function Ae(e){return P(Ue(e))}function Ue(e,n){if(function(){if(void 0!==Re)return Re;try{var e=new URL("http://test/path");return Re="http://test/path"===e.href}catch(e){Re=!1}return Re}())return void 0!==n?new URL(e,n):new URL(e);if(void 0===n&&!/:/.test(e))throw new Error("Invalid URL: "+e);var t=document,r=t.createElement("a");if(void 0!==n){var i=(t=document.implementation.createHTMLDocument("")).createElement("base");i.href=n,t.head.appendChild(i),t.body.appendChild(r)}return r.href=e,r}var Be={resourceSampleRate:100,sampleRate:100,flushTimeout:3e4,maxErrorsByMinute:3e3,maxBatchSize:50,maxMessageSize:262144,batchBytesLimit:16384,datakitUrl:"",allowedTracingOrigins:[]};function De(e){var n={};return n.secure=function(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}(e),n.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(n.domain=function(){if(void 0===F){for(var e="dd_site_test_"+S(),n=window.location.hostname.split("."),t=n.pop();n.length&&!j(e);)z(e,"test",1e3,{domain:t=n.pop()+"."+t});F=t}return F}()),n}function Pe(e,n){return t=e,r=n.datakitUrl,Ae(t)===Ae(r);var t,r}var Ve={sdkVersion:"1.1.1",sdkName:"Web SDK"},We=[[ue,function(e){return"initial_document"===e}],[ce,function(e){return"xmlhttprequest"===e}],[fe,function(e){return"fetch"===e}],[de,function(e){return"beacon"===e}],[pe,function(e,n){return null!==n.match(/\.css$/i)}],[le,function(e,n){return null!==n.match(/\.js$/i)}],[ve,function(e,n){return B(["image","img","icon"],e)||null!==n.match(/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i)}],[he,function(e,n){return null!==n.match(/\.(woff|eot|woff2|ttf)$/i)}],[me,function(e,n){return B(["audio","video"],e)||null!==n.match(/\.(mp3|mp4)$/i)}]];function Fe(e){var n=e.name;if(!function(e){try{return!!Ue(e)}catch(e){return!1}}(n))return ge;var t=function(e){var n=Ue(e).pathname;return"/"===n[0]?n:"/"+n}(n),r=ge;return p(We,(function(n){var i=n[0];if((0,n[1])(e.initiatorType,t))return r=i,!1})),r}function Qe(){for(var e=m(arguments),n=1;n<e.length;n+=1)if(e[n-1]>e[n])return!1;return!0}function ze(e){var n=je(e);if(n){var t=n.startTime,r=n.fetchStart,i=n.redirectStart,o=n.redirectEnd,s=n.domainLookupStart,a=n.domainLookupEnd,u=n.connectStart,c=n.secureConnectionStart,d=n.connectEnd,f=n.requestStart,p=n.responseStart,l=n.responseEnd,v={firstbyte:He(t,s,p),trans:He(t,p,l),ttfb:He(t,f,p)};return d!==r&&(v.tcp=He(t,u,d),Qe(u,c,d)&&(v.ssl=He(t,c,d))),a!==r&&(v.dns=He(t,s,a)),qe(e)&&(v.redirect=He(t,i,o)),v}}function je(e){if(Qe(e.startTime,e.fetchStart,e.domainLookupStart,e.domainLookupEnd,e.connectStart,e.connectEnd,e.requestStart,e.responseStart,e.responseEnd)){if(!qe(e))return e;var n=e.redirectStart,t=e.redirectEnd;if(n<e.startTime&&(n=e.startTime),t<e.startTime&&(t=e.fetchStart),Qe(e.startTime,n,t,e.fetchStart))return l({},e,{redirectEnd:t,redirectStart:n})}}function qe(e){return e.fetchStart!==e.startTime}function He(e,n,t){return M(t-n)}function Ke(e){if(e.startTime<e.responseStart)return e.decodedBodySize}function Xe(e,n){return n&&!Pe(n,e)}function Ye(){return void 0!==window.performance&&"getEntries"in performance}function Ge(e){return window.PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&B(PerformanceObserver.supportedEntryTypes,e)}function Je(e,n){var t;if(t=function(t){tn(e,n,t)},Ze("interactive",(function(){var e,n={entryType:"resource",initiatorType:"initial_document",traceId:""};if(Ge("navigation")&&performance.getEntriesByType("navigation").length>0){var r=performance.getEntriesByType("navigation")[0];e=l(r.toJSON(),n)}else{var i=en();e=l(i,{decodedBodySize:0,duration:i.responseEnd,name:window.location.href,startTime:0},n)}t(e)})),Ye()&&nn(e,n,performance.getEntries()),window.PerformanceObserver){new PerformanceObserver((function(t){nn(e,n,t.getEntries())})).observe({entryTypes:["resource","navigation","longtask","paint","largest-contentful-paint","layout-shift"]}),Ye()&&"addEventListener"in performance&&performance.addEventListener("resourcetimingbufferfull",(function(){performance.clearResourceTimings()}))}Ge("navigation")||function(e){function n(){e(l(en(),{entryType:"navigation"}))}Ze("complete",(function(){setTimeout(n)}))}((function(t){tn(e,n,t)}))}function Ze(e,n){document.readyState===e||"complete"===document.readyState?n():A(window,"complete"===e?Z:ie,n,{once:!0})}function en(){var e={},n=performance.timing;for(var t in n)T(n[t])&&(e[t]=0===n[t]?0:n[t]-$());return e}function nn(e,n,t){p(t,(function(t){"resource"!==t.entryType&&"navigation"!==t.entryType&&"paint"!==t.entryType&&"longtask"!==t.entryType&&"largest-contentful-paint"!==t.entryType&&"layout-shift"!==t.entryType||tn(e,n,t)}))}function tn(e,n,t){(function(e){return"navigation"===e.entryType&&e.loadEventEnd<=0})(t)||function(e,n){return"resource"===n.entryType&&!Xe(e,n.name)}(n,t)||e.notify(xe.PERFORMANCE_ENTRY_COLLECTED,t)}var rn={rum_web_page_performance:{type:_e.VIEW,tags:{app_id:"application.id",env:"_dd.env",version:"_dd.version",sdk_name:"_dd.sdk_name",sdk_version:"_dd.sdk_version",is_signin:"user.is_signin",os:"device.os",os_version:"device.os_version",browser:"device.browser",browser_version:"device.browser_version",screen_size:"device.screen_size",page_host:"page.host",page_apdex_level:"page.apdex_level",network_type:"device.network_type"},fields:{page_fmp:"page.fmp",page_fpt:"page.fpt",page_tti:"page.tti",page_dom_ready:"page.dom_ready",page_js_error_count:"page.error.count",page_dom:"page.dom",page_resource_load_time:"page.resource_load_time"}},rum_web_resource_performance:{type:_e.RESOURCE,tags:{app_id:"application.id",env:"_dd.env",version:"_dd.version",sdk_name:"_dd.sdk_name",sdk_version:"_dd.sdk_version",is_signin:"user.is_signin",os:"device.os",os_version:"device.os_version",browser:"device.browser",browser_version:"device.browser_version",screen_size:"device.screen_size",network_type:"device.network_type",page_host:"page.host",resource_status_group:"resource.status_group",resource_url_host:"resource.url_host",resource_url_path:"resource.url_path",resource_type:"resource.type",resource_status:"resource.status",resource_method:"resource.method",response_connection:"resource.response_connection",response_server:"resource.response_server",response_content_type:"resource.response_content_type",response_content_encoding:"resource.response_content_encoding"},fields:{resource_size:"resource.size",resource_load:"resource.load",resource_dns:"resource.dns",resource_tcp:"resource.tcp",resource_ssl:"resource.ssl",resource_ttfb:"resource.ttfb",resource_trans:"resource.trans",resource_firstbyte:"resource.firstbyte"}},js_error:{type:_e.ERROR,tags:{app_id:"application.id",env:"_dd.env",version:"_dd.version",sdk_name:"_dd.sdk_name",sdk_version:"_dd.sdk_version",is_signin:"user.is_signin",os:"device.os",os_version:"device.os_version",browser:"device.browser",browser_version:"device.browser_version",screen_size:"device.screen_size",network_type:"device.network_type",origin_id:"user.origin_id",userid:"user.user_id",error_name:"error.name",error_type:"error.type",page_id:"page.id",page_host:"page.host",page_path:"page.path",page_url:"page.url",page_referer:"page.referer"},fields:{error_starttime:"error.starttime",error_message:["string","error.message"],error_stack:["string","error.stack"]}},page:{type:_e.VIEW,tags:{app_id:"application.id",env:"_dd.env",version:"_dd.version",sdk_name:"_dd.sdk_name",sdk_version:"_dd.sdk_version",is_signin:"user.is_signin",os:"device.os",os_version:"device.os_version",browser:"device.browser",browser_version:"device.browser_version",screen_size:"device.screen_size",network_type:"device.network_type",origin_id:"user.origin_id",userid:"user.user_id",page_id:"page.id",page_host:"page.host",page_path:"page.path",page_url:"page.url",page_referer:"page.referer",page_apdex_level:"page.apdex_level"},fields:{page_fmp:"page.fmp",page_fpt:"page.fpt",page_tti:"page.tti",page_dom_ready:"page.dom_ready",page_load:"page.load",page_dom:"page.dom",page_resource_load_time:"page.resource_load_time",page_js_error_count:"page.error.count"}},resource:{type:_e.RESOURCE,tags:{app_id:"application.id",env:"_dd.env",version:"_dd.version",sdk_name:"_dd.sdk_name",sdk_version:"_dd.sdk_version",is_signin:"user.is_signin",os:"device.os",os_version:"device.os_version",browser:"device.browser",browser_version:"device.browser_version",screen_size:"device.screen_size",origin_id:"user.origin_id",userid:"user.user_id",page_id:"page.id",page_host:"page.host",page_path:"page.path",resource_url:"resource.url",resource_url_host:"resource.url_host",resource_url_path:"resource.url_path",resource_type:"resource.type",resource_status:"resource.status",resource_status_group:"resource.status_group",resource_method:"resource.method",response_connection:"resource.response_connection",response_server:"resource.response_server",response_content_type:"resource.response_content_type",response_content_encoding:"resource.response_content_encoding"},fields:{resource_size:"resouce.size",resource_load:"resource.load",resource_dns:"resource.dns",resource_tcp:"resource.tcp",resource_ssl:"resource.ssl",resource_ttfb:"resource.ttfb",resource_trans:"resource.trans",resource_firstbyte:"resource.firstbyte",request_header:["string","request.header"],response_header:["string","response.header"],page_url:["string","page.url"],page_referer:["string","page.referer"]}}},on=/[^\u0000-\u007F]/;var sn=function(e,n){this.endpointUrl=e,this.bytesLimit=n};sn.prototype={send:function(e,n){var t=function(e){return e?e+(-1===e.indexOf("?")?"?":"&")+"precision=ms":e}(this.endpointUrl);if(navigator.sendBeacon&&n<this.bytesLimit&&navigator.sendBeacon(t,e))return;var r=new XMLHttpRequest;r.open("POST",t,!0),r.withCredentials=!0,r.send(e)}};var an=sn;function un(e,n,t,r,i,o){this.request=e,this.maxSize=n,this.bytesLimit=t,this.maxMessageSize=r,this.flushTimeout=i,this.beforeUnloadCallback=o,this.flushOnVisibilityHidden(),this.flushPeriodically()}un.prototype={pushOnlyBuffer:[],upsertBuffer:{},bufferBytesSize:0,bufferMessageCount:0,add:function(e){this.addOrUpdate(e)},upsert:function(e,n){this.addOrUpdate(e,n)},flush:function(){if(0!==this.bufferMessageCount){var e=this.pushOnlyBuffer.concat(g(this.upsertBuffer));this.request.send(e.join("\n"),this.bufferBytesSize),this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesSize=0,this.bufferMessageCount=0}},processSendData:function(e){if(!e||!e.type)return"";var n=[];return p(rn,(function(t,r){if(t.type===e.type){var i="";i+=r+",";var o=[];p(t.tags,(function(n,t){var r=N(e,n);(r||T(r))&&o.push(W(t)+"="+W(r))})),e.tags.length&&p(e.tags,(function(e,n){(e||T(e))&&o.push(W(n)+"="+W(e))}));var s=[];p(t.fields,(function(n,t){if(h(n)&&2===n.length){var r=n[0],i=n[1];((o=N(e,i))||T(o))&&(o=W(o),o="string"===r?'"'+o+'"':o,s.push(W(t)+"="+o))}else if(w(n)){var o;((o=N(e,n))||T(o))&&(o=W(o),s.push(W(t)+"="+o))}})),o.length&&(i+=o.join(",")),s.length&&(i+=" ",i+=s.join(",")),i=i+" "+e.date,s.length&&n.push(i)}})),n.length?n.join("\n"):""},sizeInBytes:function(e){return on.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length},addOrUpdate:function(e,n){var t=this.process(e);t.processedMessage&&""!==t.processedMessage&&(t.messageBytesSize>=this.maxMessageSize?console.warn("Discarded a message whose size was bigger than the maximum allowed size"+this.maxMessageSize+"KB."):(this.hasMessageFor(n)&&this.remove(n),this.willReachedBytesLimitWith(t.messageBytesSize)&&this.flush(),this.push(t.processedMessage,t.messageBytesSize,n),this.isFull()&&this.flush()))},process:function(e){var n=this.processSendData(e);return{processedMessage:n,messageBytesSize:this.sizeInBytes(n)}},push:function(e,n,t){this.bufferMessageCount>0&&(this.bufferBytesSize+=1),void 0!==t?this.upsertBuffer[t]=e:this.pushOnlyBuffer.push(e),this.bufferBytesSize+=n,this.bufferMessageCount+=1},remove:function(e){var n=this.upsertBuffer[e];delete this.upsertBuffer[e];var t=this.sizeInBytes(n);this.bufferBytesSize-=t,this.bufferMessageCount-=1,this.bufferMessageCount>0&&(this.bufferBytesSize-=1)},hasMessageFor:function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},willReachedBytesLimitWith:function(e){return this.bufferBytesSize+e+1>=this.bytesLimit},isFull:function(){return this.bufferMessageCount===this.maxSize||this.bufferBytesSize>=this.bytesLimit},flushPeriodically:function(){var e=this;setTimeout((function(){e.flush(),e.flushPeriodically()}),e.flushTimeout)},flushOnVisibilityHidden:function(){var e=this;navigator.sendBeacon&&(A(window,Y,e.beforeUnloadCallback),A(document,re,(function(){"hidden"===document.visibilityState&&e.flush()})),A(window,Y,(function(){e.flush()})))}};var cn=un;function dn(e,n){var t=function(e,n){var t=(r=e.datakitUrl,i=function(){n.notify(xe.BEFORE_UNLOAD)},new cn(new an(r,e.batchBytesLimit),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout,i));var r,i;var o=!1;return{add:function(e){o||t.add(e)},stop:function(){o=!0},upsert:function(e,n){o||t.upsert(e,n)}}}(e,n);return n.subscribe(xe.RUM_EVENT_V2_COLLECTED,(function(e){var n=e.rumEvent,r=e.serverRumEvent;n.type===_e.VIEW?t.upsert(r,n.page.id):t.add(r)})),{stop:function(){t.stop()}}}var fn={navigator:void 0!==window.navigator?window.navigator:{},infoMap:{engine:["WebKit","Trident","Gecko","Presto"],browser:["Safari","Chrome","Edge","IE","Firefox","Firefox Focus","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Coc Coc","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","360","360SE","360EE","UC","QQBrowser","QQ","Baidu","Maxthon","Sogou","LBBROWSER","2345Explorer","TheWorld","XiaoMi","Quark","Qiyu","Wechat",,"WechatWork","Taobao","Alipay","Weibo","Douban","Suning","iQiYi"],os:["Windows","Linux","Mac OS","Android","Ubuntu","FreeBSD","Debian","iOS","Windows Phone","BlackBerry","MeeGo","Symbian","Chrome OS","WebOS"],device:["Mobile","Tablet","iPad"]}},pn={getMatchMap:function(e){return{Trident:e.indexOf("Trident")>-1||e.indexOf("NET CLR")>-1,Presto:e.indexOf("Presto")>-1,WebKit:e.indexOf("AppleWebKit")>-1,Gecko:e.indexOf("Gecko/")>-1,Safari:e.indexOf("Safari")>-1,Chrome:e.indexOf("Chrome")>-1||e.indexOf("CriOS")>-1,IE:e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1,Edge:e.indexOf("Edge")>-1,Firefox:e.indexOf("Firefox")>-1||e.indexOf("FxiOS")>-1,"Firefox Focus":e.indexOf("Focus")>-1,Chromium:e.indexOf("Chromium")>-1,Opera:e.indexOf("Opera")>-1||e.indexOf("OPR")>-1,Vivaldi:e.indexOf("Vivaldi")>-1,Yandex:e.indexOf("YaBrowser")>-1,Arora:e.indexOf("Arora")>-1,Lunascape:e.indexOf("Lunascape")>-1,QupZilla:e.indexOf("QupZilla")>-1,"Coc Coc":e.indexOf("coc_coc_browser")>-1,Kindle:e.indexOf("Kindle")>-1||e.indexOf("Silk/")>-1,Iceweasel:e.indexOf("Iceweasel")>-1,Konqueror:e.indexOf("Konqueror")>-1,Iceape:e.indexOf("Iceape")>-1,SeaMonkey:e.indexOf("SeaMonkey")>-1,Epiphany:e.indexOf("Epiphany")>-1,360:e.indexOf("QihooBrowser")>-1||e.indexOf("QHBrowser")>-1,"360EE":e.indexOf("360EE")>-1,"360SE":e.indexOf("360SE")>-1,UC:e.indexOf("UC")>-1||e.indexOf(" UBrowser")>-1,QQBrowser:e.indexOf("QQBrowser")>-1,QQ:e.indexOf("QQ/")>-1,Baidu:e.indexOf("Baidu")>-1||e.indexOf("BIDUBrowser")>-1,Maxthon:e.indexOf("Maxthon")>-1,Sogou:e.indexOf("MetaSr")>-1||e.indexOf("Sogou")>-1,LBBROWSER:e.indexOf("LBBROWSER")>-1||e.indexOf("LieBaoFast")>-1,"2345Explorer":e.indexOf("2345Explorer")>-1,TheWorld:e.indexOf("TheWorld")>-1,XiaoMi:e.indexOf("MiuiBrowser")>-1,Quark:e.indexOf("Quark")>-1,Qiyu:e.indexOf("Qiyu")>-1,Wechat:e.indexOf("MicroMessenger")>-1,WechatWork:e.indexOf("wxwork/")>-1,Taobao:e.indexOf("AliApp(TB")>-1,Alipay:e.indexOf("AliApp(AP")>-1,Weibo:e.indexOf("Weibo")>-1,Douban:e.indexOf("com.douban.frodo")>-1,Suning:e.indexOf("SNEBUY-APP")>-1,iQiYi:e.indexOf("IqiyiApp")>-1,Windows:e.indexOf("Windows")>-1,Linux:e.indexOf("Linux")>-1||e.indexOf("X11")>-1,"Mac OS":e.indexOf("Macintosh")>-1,Android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,Ubuntu:e.indexOf("Ubuntu")>-1,FreeBSD:e.indexOf("FreeBSD")>-1,Debian:e.indexOf("Debian")>-1,"Windows Phone":e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,BlackBerry:e.indexOf("BlackBerry")>-1||e.indexOf("RIM")>-1,MeeGo:e.indexOf("MeeGo")>-1,Symbian:e.indexOf("Symbian")>-1,iOS:e.indexOf("like Mac OS X")>-1,"Chrome OS":e.indexOf("CrOS")>-1,WebOS:e.indexOf("hpwOS")>-1,Mobile:e.indexOf("Mobi")>-1||e.indexOf("iPh")>-1||e.indexOf("480")>-1,Tablet:e.indexOf("Tablet")>-1||e.indexOf("Nexus 7")>-1,iPad:e.indexOf("iPad")>-1}},matchInfoMap:function(e){var n=fn.navigator.userAgent||{},t=pn.getMatchMap(n);for(var r in fn.infoMap)for(var i=0;i<fn.infoMap[r].length;i++){var o=fn.infoMap[r][i];t[o]&&(e[r]=o)}},getOS:function(){return pn.matchInfoMap(this),this.os},getOSVersion:function(){var e=fn.navigator.userAgent||{};this.osVersion="";var n={Windows:function(){var n=e.replace(/^.*Windows NT ([\d.]+);.*$/,"$1");return{6.4:"10",6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP",5.1:"XP","5.0":"2000"}[n]||n},Android:function(){return e.replace(/^.*Android ([\d.]+);.*$/,"$1")},iOS:function(){return e.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".")},Debian:function(){return e.replace(/^.*Debian\/([\d.]+).*$/,"$1")},"Windows Phone":function(){return e.replace(/^.*Windows Phone( OS)? ([\d.]+);.*$/,"$2")},"Mac OS":function(){return e.replace(/^.*Mac OS X ([\d_]+).*$/,"$1").replace(/_/g,".")},WebOS:function(){return e.replace(/^.*hpwOS\/([\d.]+);.*$/,"$1")}};return n[this.os]&&(this.osVersion=n[this.os](),this.osVersion==e&&(this.osVersion="")),this.osVersion},getOrientationStatu:function(){return window.matchMedia("(orientation: portrait)").matches?"竖屏":"横屏"},getDeviceType:function(){return this.device="PC",pn.matchInfoMap(this),this.device},getNetwork:function(){return navigator&&navigator.connection&&navigator.connection.effectiveType},getLanguage:function(){var e;return this.language=((e=(fn.navigator.browserLanguage||fn.navigator.language).split("-"))[1]&&(e[1]=e[1].toUpperCase()),e.join("_")),this.language},getBrowserInfo:function(){pn.matchInfoMap(this);var e=fn.navigator.userAgent||{},n=function(e,n){var t=fn.navigator.mimeTypes;for(var r in t)if(t[r][e]==n)return!0;return!1},t=pn.getMatchMap(e),r=!1;if(window.chrome){var i=e.replace(/^.*Chrome\/([\d]+).*$/,"$1");i>36&&window.showModalDialog?r=!0:i>45&&(r=n("type","application/vnd.chromium.remoting-viewer"))}if(t.Baidu&&t.Opera&&(t.Baidu=!1),t.Mobile&&(t.Mobile=!(e.indexOf("iPad")>-1)),r&&(n("type","application/gameplugin")||fn.navigator&&void 0===fn.navigator.connection.saveData?t["360SE"]=!0:t["360EE"]=!0),t.IE||t.Edge)switch(window.screenTop-window.screenY){case 71:case 74:case 99:break;case 102:t["360EE"]=!0;break;case 75:case 74:case 105:break;case 104:t["360SE"]=!0}var o={Safari:function(){return e.replace(/^.*Version\/([\d.]+).*$/,"$1")},Chrome:function(){return e.replace(/^.*Chrome\/([\d.]+).*$/,"$1").replace(/^.*CriOS\/([\d.]+).*$/,"$1")},IE:function(){return e.replace(/^.*MSIE ([\d.]+).*$/,"$1").replace(/^.*rv:([\d.]+).*$/,"$1")},Edge:function(){return e.replace(/^.*Edge\/([\d.]+).*$/,"$1")},Firefox:function(){return e.replace(/^.*Firefox\/([\d.]+).*$/,"$1").replace(/^.*FxiOS\/([\d.]+).*$/,"$1")},"Firefox Focus":function(){return e.replace(/^.*Focus\/([\d.]+).*$/,"$1")},Chromium:function(){return e.replace(/^.*Chromium\/([\d.]+).*$/,"$1")},Opera:function(){return e.replace(/^.*Opera\/([\d.]+).*$/,"$1").replace(/^.*OPR\/([\d.]+).*$/,"$1")},Vivaldi:function(){return e.replace(/^.*Vivaldi\/([\d.]+).*$/,"$1")},Yandex:function(){return e.replace(/^.*YaBrowser\/([\d.]+).*$/,"$1")},Arora:function(){return e.replace(/^.*Arora\/([\d.]+).*$/,"$1")},Lunascape:function(){return e.replace(/^.*Lunascape[\/\s]([\d.]+).*$/,"$1")},QupZilla:function(){return e.replace(/^.*QupZilla[\/\s]([\d.]+).*$/,"$1")},"Coc Coc":function(){return e.replace(/^.*coc_coc_browser\/([\d.]+).*$/,"$1")},Kindle:function(){return e.replace(/^.*Version\/([\d.]+).*$/,"$1")},Iceweasel:function(){return e.replace(/^.*Iceweasel\/([\d.]+).*$/,"$1")},Konqueror:function(){return e.replace(/^.*Konqueror\/([\d.]+).*$/,"$1")},Iceape:function(){return e.replace(/^.*Iceape\/([\d.]+).*$/,"$1")},SeaMonkey:function(){return e.replace(/^.*SeaMonkey\/([\d.]+).*$/,"$1")},Epiphany:function(){return e.replace(/^.*Epiphany\/([\d.]+).*$/,"$1")},360:function(){return e.replace(/^.*QihooBrowser\/([\d.]+).*$/,"$1")},"360SE":function(){return{63:"10.0",55:"9.1",45:"8.1",42:"8.0",31:"7.0",21:"6.3"}[e.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},"360EE":function(){return{69:"11.0",63:"9.5",55:"9.0",50:"8.7",30:"7.5"}[e.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},Maxthon:function(){return e.replace(/^.*Maxthon\/([\d.]+).*$/,"$1")},QQBrowser:function(){return e.replace(/^.*QQBrowser\/([\d.]+).*$/,"$1")},QQ:function(){return e.replace(/^.*QQ\/([\d.]+).*$/,"$1")},Baidu:function(){return e.replace(/^.*BIDUBrowser[\s\/]([\d.]+).*$/,"$1")},UC:function(){return e.replace(/^.*UC?Browser\/([\d.]+).*$/,"$1")},Sogou:function(){return e.replace(/^.*SE ([\d.X]+).*$/,"$1").replace(/^.*SogouMobileBrowser\/([\d.]+).*$/,"$1")},LBBROWSER:function(){var n="";e.indexOf("LieBaoFast")>-1&&(n=e.replace(/^.*LieBaoFast\/([\d.]+).*$/,"$1"));var t=e.replace(/^.*Chrome\/([\d]+).*$/,"$1");return n||{57:"6.5",49:"6.0",46:"5.9",42:"5.3",39:"5.2",34:"5.0",29:"4.5",21:"4.0"}[t]||""},"2345Explorer":function(){return e.replace(/^.*2345Explorer\/([\d.]+).*$/,"$1")},TheWorld:function(){return e.replace(/^.*TheWorld ([\d.]+).*$/,"$1")},XiaoMi:function(){return e.replace(/^.*MiuiBrowser\/([\d.]+).*$/,"$1")},Quark:function(){return e.replace(/^.*Quark\/([\d.]+).*$/,"$1")},Qiyu:function(){return e.replace(/^.*Qiyu\/([\d.]+).*$/,"$1")},Wechat:function(){return e.replace(/^.*MicroMessenger\/([\d.]+).*$/,"$1")},WechatWork:function(){return e.replace(/^.*wxwork\/([\d.]+).*$/,"$1")},Taobao:function(){return e.replace(/^.*AliApp\(TB\/([\d.]+).*$/,"$1")},Alipay:function(){return e.replace(/^.*AliApp\(AP\/([\d.]+).*$/,"$1")},Weibo:function(){return e.replace(/^.*weibo__([\d.]+).*$/,"$1")},Douban:function(){return e.replace(/^.*com.douban.frodo\/([\d.]+).*$/,"$1")},Suning:function(){return e.replace(/^.*SNEBUY-APP([\d.]+).*$/,"$1")},iQiYi:function(){return e.replace(/^.*IqiyiVersion\/([\d.]+).*$/,"$1")}};return this.browserVersion="",o[this.browser]&&(this.browserVersion=o[this.browser](),this.browserVersion==e&&(this.browserVersion="")),"Chrome"==this.browser&&e.match(/\S+Browser/)&&(this.browser=e.match(/\S+Browser/)[0],this.version=e.replace(/^.*Browser\/([\d.]+).*$/,"$1")),"Edge"==this.browser&&(this.version>"75"?this.engine="Blink":this.engine="EdgeHTML"),("Chrome"==this.browser&&parseInt(this.browserVersion)>27||t.Chrome&&"WebKit"==this.engine&&parseInt(version.Chrome())>27||"Opera"==this.browser&&parseInt(this.version)>12||"Yandex"==this.browser)&&(this.engine="Blink"),{browser:this.browser,browserVersion:this.browserVersion,engine:this.engine}},getGeoPostion:function(e){navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(n){e(n)}),(function(e){console.log(e)}))}},ln={os:pn.getOS(),osVersion:pn.getOSVersion(),browser:pn.getBrowserInfo().browser,browserVersion:pn.getBrowserInfo().browserVersion,screenSize:window.screen.width+"*"+window.screen.height,networkType:pn.getNetwork()},vn="synthetics",hn="user";function mn(e,n,t,r,i,o){t.subscribe(xe.RAW_RUM_EVENT_V2_COLLECTED,(function(s){var a,u=s.startTime,c=s.rawRumEvent,d=s.savedGlobalContext,f=s.customerContext,p=i.findViewV2(u),l={device:ln};if(r.isTracked()&&p&&p.session.id){var h=i.findActionV2(u),m={_dd:{sdkName:n.sdkName,sdkVersion:n.sdkVersion,env:n.env,version:n.version},tags:n.tags,application:{id:e},device:{},date:(new Date).getTime(),user:{originId:r.getId(),user_id:n.user_id||r.getAnonymousID(),is_signin:n.user_id?"T":"F"},session:{type:void 0===window._DATAFLUX_SYNTHETICS_BROWSER?hn:vn}},g=(a=c,-1!==[_e.ERROR,_e.RESOURCE,_e.LONG_TASK].indexOf(a.type)?v(m,l,p,h,c):v(m,l,p,c)),_=V(g);_.context=v(d||o(),f),t.notify(xe.RUM_EVENT_V2_COLLECTED,{rumEvent:g,serverRumEvent:_})}}))}var gn="agent",_n="console",En="network",yn="source";function bn(e){var n=e.name||"Error: "+e.message;return p(e.stack,(function(e){var t="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"("+e.args.join(", ")+")":"",i=e.line?":"+e.line:"",o=e.line&&e.column?":"+e.column:"";n+="\n  at "+t+r+" @ "+e.url+i+o})),n}var wn=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function Tn(e,n){return Object.prototype.hasOwnProperty.call(e,n)}var On,Sn,xn,Cn,Rn,kn=function(){var e,n,t,r,i,o,s=[];function a(e,n,t){var r;for(var i in s)if(Tn(s,i))try{s[i](e,n,t)}catch(e){r=e}if(r)throw r}function u(e,r,i,o,s){var u=this;if(n)In.augmentStackTraceWithInitialElement(n,r,i,e+""),d();else if(s)a(In(s),!0,s);else{var c,f={url:r,column:o,line:i},p=e;if("[object String]"==={}.toString.call(e)){var l=p.match(wn);l&&(c=l[1],p=l[2])}a({name:c,message:p,stack:[f]},!0)}return!!t&&t.apply(u,arguments)}function c(e){var n=e.reason||"Empty reason";a(In(n),!0,n)}function d(){var t=n,r=e;n=void 0,e=void 0,a(t,!1,r)}function f(t){if(n){if(e===t)return;d()}var r=In(t);throw n=r,e=t,setTimeout((function(){e===t&&d()}),r.incompvare?2e3:0),t}return f.subscribe=function(e){!function(){if(r)return;t=window.onerror,window.onerror=u,r=!0}(),function(){if(o)return;i=null!==window.onunhandledrejection?window.onunhandledrejection:void 0,window.onunhandledrejection=c,o=!0}(),s.push(e)},f.unsubscribe=function(e){for(var n=s.length-1;n>=0;n-=1)s[n]===e&&s.splice(n,1);0===s.length&&(r&&(window.onerror=t,r=!1),o&&(window.onunhandledrejection=i,o=!1))},f.traceKitWindowOnError=u,f}(),In=function(){function e(e){if(e.stack){for(var n,t,r,i,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,s=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,c=/\((\S*)(?::(\d+))(?::(\d+))\)/,d=e.stack.split("\n"),f=[],p=0,l=d.length;p<l;p+=1){if(o.exec(d[p])){var v=(r=o.exec(d[p]))[2]&&0===r[2].indexOf("native");n=r[2]&&0===r[2].indexOf("eval"),t=c.exec(r[2]),n&&t&&(r[2]=t[1],r[3]=t[2],r[4]=t[3]),i={args:v?[r[2]]:[],column:r[4]?+r[4]:void 0,func:r[1]||UNKNOWN_FUNCTION,line:r[3]?+r[3]:void 0,url:v?void 0:r[2]}}else if(a.exec(d[p]))i={args:[],column:(r=a.exec(d[p]))[4]?+r[4]:void 0,func:r[1]||UNKNOWN_FUNCTION,line:+r[3],url:r[2]};else{if(!s.exec(d[p]))continue;n=(r=s.exec(d[p]))[3]&&r[3].indexOf(" > eval")>-1,t=u.exec(r[3]),n&&t?(r[3]=t[1],r[4]=t[2],r[5]=void 0):0!==p||r[5]||void 0===e.columnNumber||(f[0].column=e.columnNumber+1),i={args:r[2]?r[2].split(","):[],column:r[5]?+r[5]:void 0,func:r[1]||UNKNOWN_FUNCTION,line:r[4]?+r[4]:void 0,url:r[3]}}!i.func&&i.line&&(i.func=UNKNOWN_FUNCTION),f.push(i)}if(f.length)return{stack:f,message:e.message,name:e.name}}}function n(e,n,t,r){var i={url:n,line:t?+t:void 0};if(i.url&&i.line){e.incompvare=!1;var o=e.stack;if(o.length>0&&o[0].url===i.url){if(o[0].line===i.line)return!1;if(!o[0].line&&o[0].func===i.func)return o[0].line=i.line,o[0].context=i.context,!1}return o.unshift(i),e.partial=!0,!0}return e.incompvare=!0,!1}function t(e,r){for(var i,o,s=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,a=[],u={},c=!1,d=t.caller;d&&!c;d=d.caller)d!==In&&d!==kn&&(o={args:[],column:void 0,func:UNKNOWN_FUNCTION,line:void 0,url:void 0},i=s.exec(d.toString()),d.name?o.func=d.name:i&&(o.func=i[1]),void 0===o.func&&(o.func=i?i.input.substring(0,i.input.indexOf("{")):void 0),u[d+""]?c=!0:u[d+""]=!0,a.push(o));r&&a.splice(0,r);var f={stack:a,message:e.message,name:e.name};return n(f,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),f}function r(n,r){var i,o=void 0===r?0:+r;try{if(i=function(e){var n=e.stacktrace;if(n){for(var t,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=n.split("\n"),s=[],a=0;a<o.length;a+=2){var u;r.exec(o[a])?u={args:[],column:void 0,func:(t=r.exec(o[a]))[3],line:+t[1],url:t[2]}:i.exec(o[a])&&(u={args:(t=i.exec(o[a]))[5]?t[5].split(","):[],column:+t[2],func:t[3]||t[4],line:+t[1],url:t[6]}),u&&(!u.func&&u.line&&(u.func=UNKNOWN_FUNCTION),u.context=[o[a+1]],s.push(u))}if(s.length)return{stack:s,message:e.message,name:e.name}}}(n))return i}catch(e){0}try{if(i=e(n))return i}catch(e){0}try{if(i=function(e){var n=e.message.split("\n");if(!(n.length<4)){var t,r=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,i=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of function script\s*$/i,s=[],a=window&&window.document&&window.document.getElementsByTagName("script"),u=[];for(var c in a)Tn(a,c)&&!a[c].src&&u.push(a[c]);for(var d=2;d<n.length;d+=2){var f;if(r.exec(n[d]))f={args:[],column:void 0,func:(t=r.exec(n[d]))[3],line:+t[1],url:t[2]};else if(i.exec(n[d]))f={args:[],column:void 0,func:(t=i.exec(n[d]))[4],line:+t[1],url:t[3]};else if(o.exec(n[d])){t=o.exec(n[d]),f={url:window.location.href.replace(/#.*$/,""),args:[],column:void 0,func:"",line:+t[1]}}f&&(f.func||(f.func=UNKNOWN_FUNCTION),f.context=[n[d+1]],s.push(f))}if(s.length)return{stack:s,message:n[0],name:e.name}}}(n))return i}catch(e){0}try{if(i=t(n,o+1))return i}catch(e){0}return{message:n.message,name:n.name,stack:[]}}return r.augmentStackTraceWithInitialElement=n,r.computeStackTraceFromStackProp=e,r.ofCaller=function(e){var n=1+(void 0===e?0:+e);try{throw new Error}catch(e){return In(e,n+1)}},r}(),Mn=[],Ln=[];function $n(){return On||(Sn=XMLHttpRequest.prototype.open,xn=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.open=function(e,n){return this._dataflux_xhr={method:e,startTime:-1,url:Ne(n)},Sn.apply(this,arguments)},XMLHttpRequest.prototype.send=function(e){var n=this;if(n._dataflux_xhr){n._dataflux_xhr.startTime=performance.now();var t=n.onreadystatechange;n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i(),t&&t.apply(n,arguments)};var r=!1,i=function(){r||(r=!0,n._dataflux_xhr.duration=performance.now()-n._dataflux_xhr.startTime,n._dataflux_xhr.response=n.response,n._dataflux_xhr.status=n.status,p(Ln,(function(e){e(n._dataflux_xhr,n)})))};n.addEventListener("loadend",i),p(Mn,(function(e){e(n._dataflux_xhr,n)}))}return xn.apply(n,arguments)},On={beforeSend:function(e){Mn.push(e)},onRequestComplete:function(e){Ln.push(e)}}),On}var Nn,An,Un,Bn=[],Dn=[];function Pn(){return Cn||(!function(){if(!window.fetch)return;Rn=window.fetch,window.fetch=function(e,n){var t=n&&n.method||"object"==typeof e&&e.method||"GET",r=Ne("object"==typeof e&&e.url||e),i={init:n,method:t,startTime:performance.now(),url:r},o=async function(e){if(i.duration=performance.now()-i.startTime,"stack"in e||e instanceof Error)i.status=0,i.headers=e.headers,i.response=bn(In(e)),p(Dn,(function(e){e(i)}));else if("status"in e){var n;try{n=await e.clone().text()}catch(e){n="Unable to retrieve response: "+e}i.response=n,i.responseType=e.type,i.status=e.status,i.headers=e.headers,p(Dn,(function(e){e(i)}))}};p(Bn,(function(e){e(i)}));var s=Rn.call(this,e,i.init);return s.then(o,o),s}}(),Cn={beforeSend:function(e){Bn.push(e)},onRequestComplete:function(e){Dn.push(e)}}),Cn}function Vn(e){return"string"==typeof e?e:e instanceof Error?bn(In(e)):function(e,n,t){if(null==e)return JSON.stringify(e);var r=[!1,void 0];C(e)&&(r=[!0,e.toJSON],delete e.toJSON);var i,o,s=[!1,void 0];"object"==typeof e&&C(i=Object.getPrototypeOf(e))&&(s=[!0,i.toJSON],delete i.toJSON);try{o=JSON.stringify(e,void 0,t)}catch(e){o="<error: unable to serialize object>"}finally{r[0]&&(e.toJSON=r[1]),s[0]&&(i.toJSON=s[1])}return o}(e,0,2)}function Wn(e){An=function(n,t,r){var i=function(e,n,t){return e&&(void 0!==e.message||n instanceof Error)?{message:e.message||"Empty message",stack:bn(e),type:e.name}:{message:t+""+JSON.stringify(n),stack:"No stack, consider using an instance of Error",type:e&&e.name}}(n,r,"Uncaught");e.notify({message:i.message,stack:i.stack,type:i.type,source:yn,startTime:performance.now()})},kn.subscribe(An)}function Fn(e){if(!Un){var n=new X;!function(e,n){function t(t,r){Pe(r.url,e)||!function(e){return 0===e.status&&"opaque"!==e.responseType}(r)&&!function(e){return e.status>=500}(r)||n.notify({message:zn(t)+"error"+r.method+" "+r.url,resource:{method:r.method,statusCode:r.status,url:r.url},source:En,stack:Qn(r.response,e)||"Failed to load",startTime:r.startTime})}$n().onRequestComplete((function(e){return t(Ee.XHR,e)})),Pn().onRequestComplete((function(e){t(Ee.FETCH,e)}))}(e,n),function(e){Nn=console.error,console.error=function(){Nn.apply(console,arguments);var n=m(arguments),t=[];p(["console error:"].concat(n),(function(e){t.push(Vn(e))})),e.notify({message:t.join(" "),source:_n,startTime:performance.now()})}}(n),Wn(n),Un=function(e,n){var t=0,r=new X;return n.subscribe((function(n){t<e.maxErrorsByMinute?(t+=1,r.notify(n)):t===e.maxErrorsByMinute&&(t+=1,r.notify({message:"Reached max number of errors by minute: "+e.maxErrorsByMinute,source:gn,startTime:performance.now()}))})),setInterval((function(){t=0}),6e4),r}(e,n)}return Un}function Qn(e,n){return e&&e.length>n.requestErrorResponseLengthLimit?e.substring(0,n.requestErrorResponseLengthLimit)+"...":e}function zn(e){return Ee.XHR===e?"XHR":"Fetch"}function jn(e,n){return function(e,n,t){t.subscribe((function(n){e.notify(xe.RAW_RUM_EVENT_V2_COLLECTED,function(e){return{rawRumEvent:{date:L(e.startTime),error:{message:e.message,resource:e.resource,source:e.source,stack:e.stack,type:e.type,starttime:L(e.startTime)},type:_e.ERROR},startTime:e.startTime}}(n))}))}(e,0,Fn(n))}var qn;function Hn(e,n){var t=function(e){var n,t=new X,r=[],i=0;function o(){t.notify({isBusy:i>0})}return r.push(e.subscribe(xe.DOM_MUTATED,(function(){o()}))),r.push(e.subscribe(xe.PERFORMANCE_ENTRY_COLLECTED,(function(e){"resource"===e.entryType&&o()}))),r.push(e.subscribe(xe.REQUEST_STARTED,(function(e){void 0===n&&(n=e.requestIndex),i+=1,o()}))),r.push(e.subscribe(xe.REQUEST_COMPLETED,(function(e){void 0===n||e.requestIndex<n||(i-=1,o())}))),{observable:t,stop:function(){p(r,(function(e){e.unsubscribe()}))}}}(e),r=t.observable,i=t.stop,o=function(e,n,t){var r,i=!1,o=setTimeout((function(){u(!1,0)}),100),s=setTimeout((function(){u(!0,performance.now())}),1e4);function a(){i=!0,clearTimeout(o),clearTimeout(r),clearTimeout(s),n()}function u(e,n){i||(a(),t(e,n))}return e.subscribe((function(e){var n=e.isBusy;clearTimeout(o),clearTimeout(r);var t=performance.now();n||(r=setTimeout((function(){u(!0,t)}),100))})),{stop:a}}(r,i,n).stop;return{stop:function(){o(),i()}}}function Kn(e){if(void 0===e&&(e=window),!qn)if("hidden"===document.visibilityState)qn={timeStamp:0};else{qn={timeStamp:1/0};var n=A(e,ae,(function(e){qn.timeStamp=e.timeStamp}),{capture:!0,once:!0});n.stop}return qn}function Xn(e,n){var t={};function r(e){t=l({},t,e),n(t)}var i=function(e,n){return{stop:e.subscribe(xe.PERFORMANCE_ENTRY_COLLECTED,(function(e){"navigation"===e.entryType&&n({fetchStart:e.fetchStart,responseEnd:e.responseEnd,domComplete:e.domComplete,domContentLoaded:e.domContentLoadedEventEnd,domInteractive:e.domInteractive,loadEventEnd:e.loadEventEnd})})).unsubscribe}}(e,r),o=function(e,n){var t=Kn();return{stop:e.subscribe(xe.PERFORMANCE_ENTRY_COLLECTED,(function(e){"paint"===e.entryType&&"first-contentful-paint"===e.name&&e.startTime<t.timeStamp&&n(e.startTime)})).unsubscribe}}(e,(function(e){r({firstContentfulPaint:e})})),s=function(e,n,t){var r=Kn(),i=1/0,o=U(n,[oe,J],(function(e){i=e.timeStamp}),{capture:!0,once:!0}),s=e.subscribe(xe.PERFORMANCE_ENTRY_COLLECTED,(function(e){"largest-contentful-paint"===e.entryType&&e.startTime<i&&e.startTime<r.timeStamp&&t(e.startTime)}));return{stop:function(){o.stop(),o.stop(),s.unsubscribe()}}}(e,window,(function(e){r({largestContentfulPaint:e})})),a=i.stop,u=o.stop,c=s.stop;return{stop:function(){a(),u(),c()}}}var Yn="initial_load",Gn="route_change";function Jn(e,n){var t=Zn(n,e,Yn,document.referrer,0),r=t,i=Xn(n,(function(e){t.updateTimings(e),t.scheduleUpdate()})).stop;function o(){r.isDifferentView(e)?(r.triggerUpdate(),r.end(),r=Zn(n,e,Gn,r.url)):(r.updateLocation(e),r.triggerUpdate())}!function(e){var n=history.pushState;history.pushState=function(){n.apply(this,arguments),e()};var t=history.replaceState;history.replaceState=function(){t.apply(this,arguments),e()},A(window,ee,e)}(o),A(window,se,o),n.subscribe(xe.SESSION_RENEWED,(function(){r.end(),r=Zn(n,e,Gn,r.url)})),n.subscribe(xe.BEFORE_UNLOAD,(function(){r.triggerUpdate(),r.end()}));var s=window.setInterval((function(){r.triggerUpdate()}),3e5);return{stop:function(){i(),r.end(),clearInterval(s)}}}function Zn(e,n,t,r,i){void 0===i&&(i=performance.now());var o,s,a,u=S(),c={errorCount:0,longTaskCount:0,resourceCount:0,userActionCount:0},d={},f=0,p=l({},n);e.notify(xe.VIEW_CREATED,{id:u,startTime:i,location:p,referrer:r});var v,h=O(T,3e3,{leading:!1}),m=h.cancel,g=function(e,n){void 0===n&&(n=R);var t={errorCount:0,longTaskCount:0,resourceCount:0,userActionCount:0},r=e.subscribe(xe.RAW_RUM_EVENT_V2_COLLECTED,(function(e){switch(e.rawRumEvent.type){case _e.ERROR:t.errorCount+=1,n(t);break;case _e.ACTION:t.userActionCount+=1,n(t);break;case _e.LONG_TASK:t.longTaskCount+=1,n(t);break;case _e.RESOURCE:t.resourceCount+=1,n(t)}}));return{stop:function(){r.unsubscribe()},eventCounts:t}}(e,(function(e){c=e,h()})).stop,_=function(e,n){var t=e===Yn,r=!0,i=[];function o(){!r&&!t&&i.length>0&&n(Math.max.apply(void 0,i))}return{setLoadEventEnd:function(e){t&&(t=!1,i.push(e),o())},setActivityLoadingTime:function(e){r&&(r=!1,void 0!==e&&i.push(e),o())}}}(t,(function(e){s=e,h()})),E=_.setActivityLoadingTime,y=_.setLoadEventEnd,b=function(e,n){var t=performance.now();return{stop:Hn(e,(function(e,r){n(e?r-t:void 0)})).stop}}(e,E).stop;if(Ge("layout-shift")){o=0;var w=function(e,n){return{stop:e.subscribe(xe.PERFORMANCE_ENTRY_COLLECTED,(function(e){"layout-shift"!==e.entryType||e.hadRecentInput||n(e.value)})).unsubscribe}}(e,(function(e){o+=e,h()}));v=w.stop}else v=R;function T(){f+=1,e.notify(xe.VIEW_UPDATED,{cumulativeLayoutShift:o,documentVersion:f,eventCounts:c,id:u,loadingTime:s,loadingType:t,location:p,referrer:r,startTime:i,timings:d,duration:(void 0===a?performance.now():a)-i})}return T(),{scheduleUpdate:h,end:function(){a=performance.now(),g(),b(),v()},isDifferentView:function(e){return p.pathname!==e.pathname||(n=e.hash,t=n.substr(1),!document.getElementById(t)&&e.hash!==p.hash);var n,t},triggerUpdate:function(){m(),T()},updateTimings:function(e){d=e,void 0!==e.loadEventEnd&&y(e.loadEventEnd)},updateLocation:function(e){p=l({},e)},url:p.href}}function et(e,n,t){return e.subscribe(xe.VIEW_UPDATED,(function(n){e.notify(xe.RAW_RUM_EVENT_V2_COLLECTED,function(e){var n={_dd:{documentVersion:e.documentVersion},date:L(e.startTime),type:_e.VIEW,page:{cumulativeLayoutShift:e.cumulativeLayoutShift,domComplete:M(e.timings.domComplete),domContentLoaded:M(e.timings.domContentLoaded),domInteractive:M(e.timings.domInteractive),error:{count:e.eventCounts.errorCount},firstContentfulPaint:M(e.timings.firstContentfulPaint),loadEventEnd:M(e.timings.loadEventEnd),loadingTime:M(e.loadingTime),loadingType:e.loadingType,timeSpent:M(e.duration)}};return{rawRumEvent:n=v(n,{page:nt(e.timings)}),startTime:e.startTime}}(n))})),Jn(t,e)}function nt(e){var n=je(e);if(n){var t=n.fetchStart,r=n.responseEnd,i=n.domInteractive,o=n.domContentLoaded,s=n.domComplete,a=n.loadEventEnd,u={fmp:M(n.largestContentfulPaint)};if(r!==t){u.fpt=M(r-t);var c=parseInt((r-t)/1e3);u.apdexLevel=c>9?9:c}return i!==t&&(u.tti=M(i-t)),o!==t&&(u.domReady=M(o-t)),a!==t&&(u.load=M(a-t)),a!==o&&(u.resourceLoadTime=M(a-o)),s!==i&&(u.dom=M(s-i)),u}}function tt(e){0===e.status&&(e.traceId=void 0,e.spanId=void 0)}function rt(e,n,t){var r;void 0!==it()&&function(e,n){var t=Ae(n),r=!1;return p(e.allowedTracingOrigins,(function(e){if(t===e||e instanceof RegExp&&e.test(t))return r=!0,!1})),r}(e,n.url)&&(n.traceId=new ot,n.spanId=new ot,t((r=n.traceId,{"x-dataflux-origin":"rum","x-dataflux-parent-id":n.spanId.toDecimalString(),"x-dataflux-sampled":"1","x-dataflux-sampling-priority":"1","x-dataflux-trace-id":r.toDecimalString()})))}function it(){return window.crypto||window.msCrypto}function ot(){it().getRandomValues(this.buffer),this.buffer[0]=127&this.buffer[0]}ot.prototype={buffer:new Uint8Array(8),toString:function(e){for(var n=this.readInt32(0),t=this.readInt32(4),r="";;){var i=n%e*4294967296+t;if(n=Math.floor(n/e),t=Math.floor(i/e),r=(i%e).toString(e)+r,!n&&!t)break}return r},toDecimalString:function(){return this.toString(10)},readInt32:function(e){return 16777216*this.buffer[e]+(this.buffer[e+1]<<16)+(this.buffer[e+2]<<8)+this.buffer[e+3]}};var st=1;function at(e,n){var t=function(e){return{clearTracingIfCancelled:tt,traceFetch:function(n){return rt(e,n,(function(e){n.init=l({},n.init);var t=[];n.init.headers instanceof Headers?p(n.init.headers,(function(e,n){t.push([n,e])})):h(n.init.headers)?p(n.init.headers,(function(e){t.push(e)})):n.init.headers&&p(n.init.headers,(function(e,n){t.push([n,e])})),n.init.headers=t.concat(b(e))}))},traceXhr:function(n,t){return rt(e,n,(function(e){p(e,(function(e,n){t.setRequestHeader(e,n)}))}))}}}(n);!function(e,n,t){var r=$n();r.beforeSend((function(r,i){Xe(n,r.url)&&(t.traceXhr(r,i),r.requestIndex=dt(),e.notify(xe.REQUEST_STARTED,{requestIndex:r.requestIndex}))})),r.onRequestComplete((function(r,i){if(Xe(n,r.url)){t.clearTracingIfCancelled(r);var o=i.getAllResponseHeaders(),s=ut(o,"content-type");s=s&&s.split(";").length>0&&s.split(";");var a=ut(o,"connection"),u=ut(o,"server");e.notify(xe.REQUEST_COMPLETED,{duration:r.duration,method:r.method,requestIndex:r.requestIndex,response:r.response,responseConnection:a,responseServer:u,responseHeader:o.replace(/[\n\r]/g," "),responseContentType:s&&s[0]||"",responseContentEncoding:ct(s&&s[1]),spanId:r.spanId,startTime:r.startTime,status:r.status,traceId:r.traceId,type:Ee.XHR,url:r.url})}}))}(e,n,t),function(e,n,t){var r=Pn();r.beforeSend((function(r){Xe(n,r.url)&&(t.traceFetch(r),r.requestIndex=dt(),e.notify(xe.REQUEST_STARTED,{requestIndex:r.requestIndex}))})),r.onRequestComplete((function(r){if(Xe(n,r.url)){t.clearTracingIfCancelled(r);var i=function(e){if(!(e&&e instanceof Headers))return"";var n=[],t=e.entries(),r=t.next();for(;r&&!r.done;)n.push(r.value.join(":")),r=t.next();return n.join(/\r\n/)}(r.headers),o=ut(i,"connection"),s=ut(i,"server");e.notify(xe.REQUEST_COMPLETED,{duration:r.duration,method:r.method,requestIndex:r.requestIndex,response:r.response,responseType:r.responseType,responseHeader:i.replace(/[\n\r]/g," "),responseConnection:o,responseServer:s,responseContentType:ut(i,"content-type"),responseContentEncoding:ct(ut(i,"content-encode")),spanId:r.spanId,startTime:r.startTime,status:r.status,traceId:r.traceId,type:Ee.FETCH,url:r.url})}}))}(e,n,t)}function ut(e,n){var t=new RegExp(n+":(.*)[\n\r]*","i"),r=e.match(t);return r&&r.length>1?r[1].replace(/\s*/g,""):""}function ct(e){if(!e)return"";var n=e.match(/charset=(.*)/);return n&&n.length>1?n[1].replace(/\s*/g,""):""}function dt(){var e=st;return st+=1,e}function ft(e){if(performance&&"getEntriesByName"in performance){var n=performance.getEntriesByName(e.url,"resource");if(n.length&&"toJSON"in n[0]){var t,r=E(n,(function(e){return e.toJSON()}));return r=_(r,je),1===(r=_(r,(function(n){return t=n,r=e.startTime,i=pt(e),t.startTime>=r&&pt(t)<=i;var t,r,i}))).length?r[0]:2===r.length&&pt((t=r)[0])<=t[1].startTime?r[1]:void 0}}}function pt(e){return e.startTime+e.duration}function lt(e,n,t){e.subscribe(xe.REQUEST_COMPLETED,(function(n){t.isTrackedWithResource()&&e.notify(xe.RAW_RUM_EVENT_V2_COLLECTED,function(e){var n=e.type===Ee.XHR?ce:fe,t=ft(e),r=t?t.startTime:e.startTime,i=t?ht(t):void 0,o=function(e){if(!e.traceId||!e.spanId)return;return{_dd:{spanId:e.spanId.toDecimalString(),traceId:e.traceId.toDecimalString()},resource:{id:S()}}}(e),s=x(e.url).getParse(),a=v({date:L(r),resource:{type:n,load:M(e.duration),method:e.method,status:e.status,statusGroup:vt(e.status),url:e.url,urlHost:s.Host,urlPath:s.Path,responseHeader:e.responseHeader,responseConnection:e.responseConnection,responseServer:e.responseServer,responseContentType:e.responseContentType,responseContentEncoding:e.responseContentEncoding},type:_e.RESOURCE},o,i);return{startTime:r,rawRumEvent:a}}(n))})),e.subscribe(xe.PERFORMANCE_ENTRY_COLLECTED,(function(n){var r;t.isTrackedWithResource()&&"resource"===n.entryType&&("xmlhttprequest"!==(r=n).initiatorType&&"fetch"!==r.initiatorType)&&e.notify(xe.RAW_RUM_EVENT_V2_COLLECTED,function(e){var n=Fe(e),t=ht(e),r=function(e){return e.traceId?{_dd:{traceId:e.traceId}}:void 0}(e),i=x(e.name).getParse(),o="";(function(e){return e.encodedBodySize>0&&e.transferSize>0&&e.transferSize<e.encodedBodySize||null})(e)&&(o=304);var s=v({date:L(e.startTime),resource:{type:n,url:e.name,urlHost:i.Host,urlPath:i.Path,method:"GET",status:o,statusGroup:vt(o)},type:_e.RESOURCE},r,t);return{startTime:e.startTime,rawRumEvent:s}}(n))}))}function vt(e){return e?String(e).substr(0,1)+String(e).substr(1).replace(/\d*/g,"x"):e}function ht(e){return{resource:v({},{load:(n=e,0===n.duration&&n.startTime<n.responseEnd?M(n.responseEnd-n.startTime):M(n.duration)),size:Ke(e)},ze(e))};var n}var mt,gt,_t,Et,yt,bt,wt,Tt,Ot=(mt=function(e,n){var t=new Ce,r=function(e,n){var t,r={applicationId:e.applicationId,env:e.env||"",version:e.version||"",sdkVersion:n.sdkVersion,sdkName:n.sdkName,datakitUrl:(t=e.datakitUrl,t.lastIndexOf("/")===t.length-1?t+"v1/write/rum":t+"/v1/write/rum"),tags:e.tags||[],cookieOptions:De(e)};return v(Be,r)}(e,Ve),i=Le(r,t);!function(e,n,t,r,i,o){var s=function(e,n){var t,r,i,o=[],s=[];e.subscribe(xe.VIEW_CREATED,(function(e){t&&o.unshift({context:c(),endTime:e.startTime,startTime:t.startTime}),t=e,i=n.getId()})),e.subscribe(xe.VIEW_UPDATED,(function(e){t.id===e.id&&(t=e)})),e.subscribe(xe.AUTO_ACTION_CREATED,(function(e){r=e})),e.subscribe(xe.AUTO_ACTION_COMPvarED,(function(e){r&&s.unshift({context:d(),endTime:r.startTime+e.duration,startTime:r.startTime}),r=void 0})),e.subscribe(xe.AUTO_ACTION_DISCARDED,(function(){r=void 0})),e.subscribe(xe.SESSION_RENEWED,(function(){o=[],s=[],t=void 0,r=void 0}));var a=window.setInterval((function(){u(o,144e5),u(s,3e5)}),6e4);function u(e,n){for(var t=performance.now()-n;e.length>0&&e[e.length-1].startTime<t;)e.pop()}function c(){return{sessionId:i,page:{id:t.id,referrer:t.referrer,url:t.location.href,host:t.location.host,path:t.location.pathname}}}function d(){return{userAction:{id:r.id}}}function f(e,n,t,r){if(void 0===r)return t?e():void 0;if(t&&r>=t.startTime)return e();var i=void 0;return p(n,(function(e){return!(r>e.endTime)&&(r>=e.startTime?(i=e.context,!1):void 0)})),i}var l={findAction:function(e){return f(d,s,r,e)},findActionV2:function(e){var n=l.findAction(e);if(n)return{action:{id:n.userAction.id}}},findView:function(e){return f(c,o,t,e)},findViewV2:function(e){var n=l.findView(e);if(n)return{session:{id:n.sessionId},page:n.page}},stop:function(){window.clearInterval(a)}};return l}(t,i);dn(r,t);mn(e,r,t,i,s,o),lt(t,0,i),et(t,0,n),jn(t,r)}(e.applicationId,location,t,r,i,n),Je(t,r),at(t,r)},gt=!1,Et={},l({},{init:function(e){void 0===e&&(e={}),q(De(e))&&H()&&function(e){return gt?(console.error("DATAFLUX_RUM is already initialized."),!1):e.applicationId?e.datawayUrl?void 0===e.sampleRate||D(e.sampleRate)?!(void 0!==e.resourceSampleRate&&!D(e.resourceSampleRate)&&(console.error("Resource Sample Rate should be a number between 0 and 100"),1)):(console.error("Sample Rate should be a number between 0 and 100"),!1):(console.error("datawayUrl is not configured, no RUM data will be collected."),!1):(console.error("Application ID is not configured, no RUM data will be collected."),!1)}(e)&&(mt(e,_t.get),gt=!0)},addRumGlobalContext:(_t={get:()=>Et,add(e,n){Et[e]=n},remove(e){delete Et[e]},set(e){Et=e}}).add,removeRumGlobalContext:_t.remove,getRumGlobalContext:_t.get,setRumGlobalContext:_t.set},{onReady:function(e){e()}}));yt=function(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}(),wt=Ot,Tt=yt[bt="DATAFLUX_RUM"],yt[bt]=wt,Tt&&Tt.q&&p(Tt.q,(function(e){e()}))}]);